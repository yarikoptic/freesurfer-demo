#
# Makefile.am
#
SUBDIRS=surf

foodir=$(prefix)/average

GCA=\
	face.gca \
	RB_all_2008-03-26.gca \
	RB_all_withskull_2008-03-26.gca

GCS=\
	lh.atlas2002_simple.gcs \
	lh.atlas2005_simple.gcs \
	lh.curvature.buckner40.filled.desikan_killiany.2010-03-25.gcs \
	lh_trans_toSulc.gcs \
	lh.destrieux.simple.2009-07-29.gcs \
	rh.atlas2002_simple.gcs \
	rh.atlas2005_simple.gcs \
	rh.curvature.buckner40.filled.desikan_killiany.2010-03-25.gcs \
	rh_trans_toSulc.gcs \
	rh.destrieux.simple.2009-07-29.gcs

TIF=\
	lh.average.curvature.filled.buckner40.tif \
	lh.average.CURVATURE.tif \
	lh.average.tif \
	rh.average.curvature.filled.buckner40.tif \
	rh.average.CURVATURE.tif \
	rh.average.tif \
	rigidly_aligned_brain_template.tif

TXT=\
	colortable_desikan_killiany.txt \
	colortable_BA.txt \
	tissue_parms.txt

MGZ=\
	HPMarch022005_ras.mgz \
	mni305.cor.mgz \
	mni305.cor.subfov1.mgz \
	mni305.cor.subfov2.mgz \
	mni305.mask.cor.mgz

if NMR_INSTALL
foo_DATA=\
	$(GCA) \
	$(GCS) \
	$(TIF) \
	$(TXT) \
	$(MGZ) \
	mni305.cor.readme \
	mni305.cor.subfov1.reg \
	mni305.cor.subfov2.reg \
	mni152.register.dat \
	mni152.mni305.cor.subfov1.dat \
	mni152.mni305.cor.subfov2.dat 
else
foo_DATA=\
	$(GCA) \
	$(GCS) \
	$(TIF) \
	$(TXT) \
	mni305.cor.mgz \
	mni305.cor.readme \
	mni305.mask.cor.mgz \
	mni305.cor.subfov1.mgz \
	mni305.cor.subfov2.mgz \
	mni305.cor.subfov1.reg \
	mni305.cor.subfov2.reg \
	mni152.register.dat
	mni152.mni305.cor.subfov1.dat \
	mni152.mni305.cor.subfov2.dat 
endif

EXTRA_DIST=$(foo_DATA) fsaverage.tar.gz V1_average.tar.gz \
	fsaverage3.tar.gz fsaverage4.tar.gz \
	fsaverage5.tar.gz fsaverage6.tar.gz \
	EC_average.tar.gz mult-comp-cor.tar.gz

install: install-fooDATA
	mkdir -p $(DESTDIR)$(prefix)/subjects
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage
	rm -Rf $(top_builddir)/distribution/average/fsaverage
	gunzip -c $(top_srcdir)/distribution/average/fsaverage.tar.gz | tar xvf -
	mv $(top_builddir)/distribution/average/fsaverage \
		$(DESTDIR)$(prefix)/subjects
	chmod -R 775 $(DESTDIR)$(prefix)/subjects/fsaverage
	rm -Rf $(DESTDIR)$(prefix)/subjects/V1_average
	rm -Rf $(top_builddir)/distribution/average/V1_average
	gunzip -c $(top_srcdir)/distribution/average/V1_average.tar.gz | tar xvf -
	cp -f $(top_builddir)/distribution/average/V1_average/scripts/predict_v1.sh \
		$(DESTDIR)$(prefix)/bin
	mv $(top_builddir)/distribution/average/V1_average \
		$(DESTDIR)$(prefix)/subjects
	chmod -R 775 $(DESTDIR)$(prefix)/subjects/V1_average
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage3
	rm -Rf $(top_builddir)/distribution/average/fsaverage3
	gunzip -c $(top_srcdir)/distribution/average/fsaverage3.tar.gz | tar xvf -
	mv $(top_builddir)/distribution/average/fsaverage3 \
		$(DESTDIR)$(prefix)/subjects
	chmod -R 775 $(DESTDIR)$(prefix)/subjects/fsaverage3
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage4
	rm -Rf $(top_builddir)/distribution/average/fsaverage4
	gunzip -c $(top_srcdir)/distribution/average/fsaverage4.tar.gz | tar xvf -
	mv $(top_builddir)/distribution/average/fsaverage4 \
		$(DESTDIR)$(prefix)/subjects
	chmod -R 775 $(DESTDIR)$(prefix)/subjects/fsaverage4
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage5
	rm -Rf $(top_builddir)/distribution/average/fsaverage5
	gunzip -c $(top_srcdir)/distribution/average/fsaverage5.tar.gz | tar xvf -
	mv $(top_builddir)/distribution/average/fsaverage5 \
		$(DESTDIR)$(prefix)/subjects
	chmod -R 775 $(DESTDIR)$(prefix)/subjects/fsaverage5
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage6
	rm -Rf $(top_builddir)/distribution/average/fsaverage6
	gunzip -c $(top_srcdir)/distribution/average/fsaverage6.tar.gz | tar xvf -
	mv $(top_builddir)/distribution/average/fsaverage6 \
		$(DESTDIR)$(prefix)/subjects
	chmod -R 775 $(DESTDIR)$(prefix)/subjects/fsaverage6
	rm -Rf $(DESTDIR)$(prefix)/subjects/?h.EC_average
	rm -Rf $(top_builddir)/distribution/average/?h.EC_average
	gunzip -c $(top_srcdir)/distribution/average/EC_average.tar.gz | tar xvf -
	mv $(top_builddir)/distribution/average/?h.EC_average \
		$(DESTDIR)$(prefix)/subjects
	chmod -R 775 $(DESTDIR)$(prefix)/subjects/?h.EC_average
	rm -Rf $(DESTDIR)$(prefix)/average/mult-comp-cor
	rm -Rf $(top_builddir)/distribution/average/mult-comp-cor
	gunzip -c $(top_srcdir)/distribution/average/mult-comp-cor.tar.gz | tar xvf -
	pwd
	mv $(top_builddir)/distribution/average/mult-comp-cor \
		$(DESTDIR)$(prefix)/average
	chmod -R 775 $(DESTDIR)$(prefix)/average/mult-comp-cor
	cd surf; make install

uninstall-hook:
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage3
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage4
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage5
	rm -Rf $(DESTDIR)$(prefix)/subjects/fsaverage6
	rm -Rf $(DESTDIR)$(prefix)/subjects/?h.EC_average
	rm -Rf $(DESTDIR)$(prefix)/subjects/V1_average
	rm -f $(DESTDIR)$(prefix)/bin/predict_v1.sh

# Our release target. Include files to be excluded here. They will be
# found and removed after 'make install' is run during the 'make
# release' target.
EXCLUDE_FILES="HPMarch022005_ras.mgz"

include $(top_srcdir)/Makefile.extra
